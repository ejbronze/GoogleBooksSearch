{"ast":null,"code":"import _classCallCheck from \"/Users/edwinjaquez/Desktop/GoogleBooksSearch/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/edwinjaquez/Desktop/GoogleBooksSearch/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/edwinjaquez/Desktop/GoogleBooksSearch/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/edwinjaquez/Desktop/GoogleBooksSearch/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/edwinjaquez/Desktop/GoogleBooksSearch/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/edwinjaquez/Desktop/GoogleBooksSearch/client/src/pages/Books.js\";\nimport React, { Component } from \"react\";\nimport SearchCard from \"../components/SearchCard\";\nimport SearchResult from \"../components/SearchResult\";\nimport BookItemCard from \"../components/BookItemCard\";\nimport SaveCard from \"../components/SaveResult\";\nimport API from \"../utils/API\";\n\nvar Books =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Books, _Component);\n\n  function Books() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Books);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Books)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      results: [],\n      savedBooks: [],\n      bookSearch: \"\"\n    };\n\n    _this.handleSearch = function (event) {\n      event.preventDefault();\n\n      if (_this.state.bookSearch) {\n        API.searchBooks(_this.state.bookSearch).then(function (res) {\n          return _this.setState({\n            results: res.data.items\n          });\n        } // console.log(\"reesponse\", res.data.items)\n        ).catch(function (err) {\n          return console.log(err);\n        });\n      }\n    };\n\n    _this.handleInputChange = function (event) {\n      var value = event.target.value;\n\n      _this.setState({\n        bookSearch: value\n      });\n    };\n\n    _this.handleSave = function (event) {\n      var bookIndex = event.target.attributes.getNamedItem(\"data-index\").value;\n      var saveBook = _this.state.results[bookIndex];\n      console.log(saveBook);\n      var bookData = {\n        title: saveBook.volumeInfo.title,\n        link: saveBook.volumeInfo.previewLink,\n        thumbnail: saveBook.volumeInfo.imageLinks.thumbnail,\n        author: saveBook.volumeInfo.authors[0],\n        description: saveBook.volumeInfo.description,\n        key: saveBook.id\n      };\n      API.saveBook(bookData.key, bookData).then(API.getSavedBooks().then(function (res) {\n        _this.setState({\n          savedBooks: res.data\n        });\n\n        console.log(\"In state\", _this.state.savedBooks);\n        console.log(\"Length\", _this.state.savedBooks.length);\n      }));\n    };\n\n    _this.handleDelete = function (event) {\n      var bookIndex = event.target.attributes.getNamedItem(\"data-index\").value;\n      var deleteBook = _this.state.savedBooks[bookIndex];\n      console.log(deleteBook._id);\n      API.deleteBook(deleteBook._id).then(window.location.reload());\n    };\n\n    return _this;\n  }\n\n  _createClass(Books, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      API.getSavedBooks().then(function (res) {\n        _this2.setState({\n          savedBooks: res.data\n        });\n      });\n    } //On Button click for searching books \n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, window.location.pathname === \"/\" ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(SearchCard, {\n        value: this.state.bookSearch,\n        onChange: this.handleInputChange,\n        onClick: this.handleSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(SearchResult, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, this.state.results.length ? this.state.results.map(function (book, i) {\n        return React.createElement(BookItemCard, {\n          key: book.id,\n          title: book.volumeInfo.title,\n          author: book.volumeInfo.authors ? book.volumeInfo.authors[0] : \"Anonymous\",\n          href: book.volumeInfo.previewLink,\n          thumbnail: book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail : \"http://blogs.smithsonianmag.com/design/files/2013/03/smiley-face-1.jpg\",\n          description: book.volumeInfo.description,\n          save: _this3.handleSave,\n          index: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        });\n      }) : React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"No Results to Display\"))) : React.createElement(SaveCard, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, this.state.savedBooks.length ? this.state.savedBooks.map(function (book, i) {\n        return React.createElement(BookItemCard, {\n          key: book._id,\n          title: book.title,\n          author: book.author,\n          href: book.link,\n          thumbnail: book.thumbnail ? book.thumbnail : \"http://blogs.smithsonianmag.com/design/files/2013/03/smiley-face-1.jpg\",\n          description: book.description,\n          delete: _this3.handleDelete,\n          index: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        });\n      }) : React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"No Saved Books\")));\n    }\n  }]);\n\n  return Books;\n}(Component);\n\nexport default Books;","map":{"version":3,"sources":["/Users/edwinjaquez/Desktop/GoogleBooksSearch/client/src/pages/Books.js"],"names":["React","Component","SearchCard","SearchResult","BookItemCard","SaveCard","API","Books","state","results","savedBooks","bookSearch","handleSearch","event","preventDefault","searchBooks","then","res","setState","data","items","catch","err","console","log","handleInputChange","value","target","handleSave","bookIndex","attributes","getNamedItem","saveBook","bookData","title","volumeInfo","link","previewLink","thumbnail","imageLinks","author","authors","description","key","id","getSavedBooks","length","handleDelete","deleteBook","_id","window","location","reload","pathname","map","book","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport SearchCard from \"../components/SearchCard\";\nimport SearchResult from \"../components/SearchResult\";\nimport BookItemCard from \"../components/BookItemCard\";\nimport SaveCard from \"../components/SaveResult\";\nimport API from \"../utils/API\";\n\n\nclass Books extends Component {\n\n    state = {\n        results: [],\n        savedBooks: [],\n        bookSearch: \"\"\n    };\n\n    componentDidMount (){\n        API.getSavedBooks()\n                .then(res => {\n                    this.setState({\n                        savedBooks: res.data\n                    })\n\n                })\n            \n    }\n\n\n    //On Button click for searching books \n    handleSearch = event => {\n\n        event.preventDefault();\n\n        if (this.state.bookSearch) {\n            API.searchBooks(this.state.bookSearch)\n                .then(res =>\n                    this.setState({\n                        results: res.data.items\n                    })\n                    // console.log(\"reesponse\", res.data.items)\n                )\n                .catch(err => console.log(err));\n        }\n    }\n\n    handleInputChange = event => {\n\n        const value = event.target.value;\n\n        this.setState({\n            bookSearch: value\n        })\n    }\n\n    handleSave = event => {\n        const bookIndex = event.target.attributes.getNamedItem(\"data-index\").value;\n        const saveBook = this.state.results[bookIndex];\n        console.log(saveBook);\n\n        const bookData = {\n            title: saveBook.volumeInfo.title,\n            link: saveBook.volumeInfo.previewLink,\n            thumbnail: saveBook.volumeInfo.imageLinks.thumbnail,\n            author: saveBook.volumeInfo.authors[0],\n            description: saveBook.volumeInfo.description,\n            key: saveBook.id\n        }\n\n        API.saveBook(bookData.key, bookData)\n            .then(API.getSavedBooks()\n                .then(res => {\n                    this.setState({\n                        savedBooks: res.data\n                    })\n                    console.log(\"In state\", this.state.savedBooks)\n                    console.log(\"Length\", this.state.savedBooks.length)\n                })\n            )\n    }    \n\n    handleDelete = event => {\n        const bookIndex = event.target.attributes.getNamedItem(\"data-index\").value;\n        const deleteBook = this.state.savedBooks[bookIndex]\n        console.log(deleteBook._id)\n\n        API.deleteBook(deleteBook._id).then(\n            \n            window.location.reload()\n        )\n        \n    }\n\n\n\n\n    render() {\n        return (\n            <div>\n                {window.location.pathname === \"/\" ?\n                    <div>\n                        <SearchCard\n                            value={this.state.bookSearch}\n                            onChange={this.handleInputChange}\n                            onClick={this.handleSearch}\n                        />\n\n                        <SearchResult>\n                            {this.state.results.length ? (\n\n                                this.state.results.map( (book, i) => {\n                                    return (\n                                        <BookItemCard\n                                            key={book.id}\n                                            title={book.volumeInfo.title}\n                                            author={(book.volumeInfo.authors) ? (book.volumeInfo.authors[0]) : (\"Anonymous\")}\n                                            href={book.volumeInfo.previewLink}\n                                            thumbnail={(book.volumeInfo.imageLinks) ? (book.volumeInfo.imageLinks.thumbnail) : (\"http://blogs.smithsonianmag.com/design/files/2013/03/smiley-face-1.jpg\")}\n                                            description={book.volumeInfo.description}\n                                            save={this.handleSave}\n                                            index={i}\n                                        />\n                                    )\n                                })\n                            ) : (\n                                    <h3>No Results to Display</h3>\n                                )}\n                        </SearchResult>\n                    </div>\n                    :\n                    <SaveCard>\n                        {this.state.savedBooks.length ? (\n\n                            this.state.savedBooks.map((book, i) => {\n                                return (\n                                    <BookItemCard\n                                        key={book._id}\n                                        title={book.title}\n                                        author={book.author}\n                                        href={book.link}\n                                        thumbnail={(book.thumbnail) ? (book.thumbnail) : (\"http://blogs.smithsonianmag.com/design/files/2013/03/smiley-face-1.jpg\")}\n                                        description={book.description}\n                                        delete={this.handleDelete}\n                                        index={i}\n                                    />\n                                )\n                            })\n                        ) : (\n                                <h3>No Saved Books</h3>\n                            )}\n                    </SaveCard>\n                }\n\n            </div>\n        )\n    }\n\n}\n\nexport default Books;"]},"metadata":{},"sourceType":"module"}